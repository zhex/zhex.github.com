<!DOCTYPE html>
<html lang="zh_CN">
<head>
	<meta charset="UTF-8">

<title>理解 Angular Scope</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">





<link rel="stylesheet" href="/css/style.css">

</head>
<body>
    <header id="header">
    <ul class="nav">
        <li><a href="/archives">归档</a></li>
        <li><a href="/about">关于</a></li>
    </ul>

    <div class="logo"><a href="/">ZheX.me</a></div>
</header>


    <section id="main"><article>
    <header>
        <h1>理解 Angular Scope</h1>
        <div class="info">
            <time datetime="2014-08-07T01:55:00.000Z" itemprop="datePublished">2014-08-07</time>

            
    <div class="article-category">
    <a class="article-category-link" href="/categories/前端开发/">前端开发</a>
    </div>


        </div>
    </header>

    <div class="article-entry"><p>很多人开始用 <code>angular</code> 的时候都觉得 <code>$scope</code> 这个玩意很神奇，但又很难理解其工作原理，所以我希望通过这篇文章来说说 angular scope，让大家可以更好的写出 angular 代码。</p>
<h2 id="rootScope"><a href="#rootScope" class="headerlink" title="$rootScope"></a>$rootScope</h2><p>根据词义就能了解到 $rootScope 是所有 $scope 的顶级节点，所有的 $scope 都是继承自他。 $rootScope 会被创建在我们设置 <code>ng-app</code> 属性的 DOM 元素上。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>&gt;</span> <span class="comment">&lt;!-- 在这里创建了 $rootScope --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>我们可以很方便的开打 console，测试打印节点的 scope： </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 在 console 打印 $rootScope</span></div><div class="line">angular.element(<span class="built_in">document</span>.documentElement).scope()</div></pre></td></tr></table></figure>
<p>如果我们来一段这样的代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.13/angular.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>Name:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span>=<span class="string">"yourName"</span> <span class="attr">placeholder</span>=<span class="string">"Enter a name here"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello &#123;&#123;yourName&#125;&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>这里有一个 叫 ng-model 的 directive ， directive 的工作就是把DOM 元素和 scope连接起来，让开发者在这里对 DOM 元素的行为进行操作。 比如这里的 ng-model 就把 input 元素绑定了 $rootScope 上，并加入了一个 <code>yourName</code> 的属性.</p>
<p>angular 还会为元素加上 change 事件，当 change 事件被触发的时候，angular 会用 input 元素的值去更新 scope 中 <code>yourName</code> 的值，并且通知其他相关元素作更新。 这一切都是由 angular 的 dirty checking 机制完成的。在这里原本 $rootScope 是没有 ｀yourName` 对象的， angular 会自动为你创建。 </p>
<p>这就是所谓的双向数据绑定（2-way data binding），当改变 model 的时候， 页面上的相关元素都会响应的变化。</p>
<h2 id="Controller-中的-scope"><a href="#Controller-中的-scope" class="headerlink" title="Controller 中的 $scope"></a>Controller 中的 $scope</h2><p>要知道 $scope 在 controller 中如何工作的，肯定先要知道 controller 是干什么的。 在 angular 中 controller 就是把 数据 model 传送到 view 层提供展示。非常简单，直接。 当 view 问 controller 要数据的时候，controller 就会根据 view 的要求，乖乖的把数据上交。</p>
<p>通常我们都希望让 controller 保持短小精悍，便于测试。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">"MyModule"</span>)</div><div class="line">    .controller(<span class="string">"FooCtrl"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">        $scope.user = &#123;</div><div class="line">            <span class="attr">name</span>: <span class="string">"Foo"</span></div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        $scope.doFoo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">// Do something!</span></div><div class="line">        &#125;;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p>当我们用 <code>ng-controller</code> 绑定页面元素的时候，我们实际创建了一个继承自 $rootScope 的 子 scope。</p>
<h2 id="嵌套式-Controller"><a href="#嵌套式-Controller" class="headerlink" title="嵌套式 Controller"></a>嵌套式 Controller</h2><p>我们知道 angular 中的 controller 是可以嵌套的，controller 创建的 scope 有可能继承自其他的 scope， 所以我们在使用的时候也要非常小心。当我们在父级 scope 上创建原始值（string， number， boolean）的时候，子级 scope 并不能很好的维护他。 当子级 scope 去修改父级 scope 的原始值的时候， angular 会打破继承， 在子级 scope 复制一个值。 所以我们最好使用对象， 比如<code>ng-model=&quot;user.name&quot;</code>, 这样就不会打破继承关系。</p>
<p>另外我们可以使用 <code>controllerAs</code> 来解决继承问题，比如如下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">"MyModule"</span>)</div><div class="line">    .controller(<span class="string">"FirstCtrl"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.user = &#123;</div><div class="line">            <span class="attr">name</span>: <span class="string">"Dr. Evil"</span></div><div class="line">        &#125;;</div><div class="line">    &#125;)</div><div class="line">    .controller(<span class="string">"SecondCtrl"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.lair = &#123;</div><div class="line">            <span class="attr">name</span>: <span class="string">"Underground"</span></div><div class="line">        &#125;;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"FirstController as first"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"SecondController as second"</span>&gt;</span></div><div class="line">        &#123;&#123;first.user.name&#125;&#125;</div><div class="line">        &#123;&#123;second.lair.name&#125;&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>angular 在 1.2 版本后可以通过 controllerAs 提供一个 controller 的昵称很好的解决继承问题，开发者在使用的时候可以明确指定要使用哪个 scope 中的对象。</p>
<p>其实刚才的代码就是把 $scope.first 挂上了 controller 的 this，并没有多么神奇，上面的代码等同于：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">"MyModule"</span>)</div><div class="line">    .controller(<span class="string">"FirstCtrl"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">        $scope.first = <span class="keyword">this</span>;</div><div class="line"></div><div class="line">        $scope.first.user = &#123;</div><div class="line">            <span class="attr">name</span>: <span class="string">"Dr. Evil"</span></div><div class="line">        &#125;;</div><div class="line">    &#125;)</div><div class="line">    .controller(<span class="string">"SecondCtrl"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">        $scope.second = <span class="keyword">this</span>;</div><div class="line"></div><div class="line">        $scope.second.lair = &#123;</div><div class="line">            <span class="attr">name</span>: <span class="string">"Underground"</span></div><div class="line">        &#125;;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p>使用 controllerAs 是不是会觉得逻辑更清晰一点？</p>
<h2 id="directive-中的-scope"><a href="#directive-中的-scope" class="headerlink" title="directive 中的 $scope"></a>directive 中的 $scope</h2><p>创建自定义 directive 是一个经常容易出问题的地方，这却恰恰又是 angular 的强大所在。首先我们在创建 directive 的时候可以通过 <code>scope</code> 属性来设置该 directive scope 的控制范围。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">"MyModule"</span>)</div><div class="line">  .directive(<span class="string">"MyDirective"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">scope</span>: <span class="string">"false|true|&#123;&#125;"</span></div><div class="line">    &#125;</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<p>默认情况下 <code>scope: flase</code>。</p>
<p>当我们想创建可复用的 directive 的时候， scope 的默认设置可能是一个危险的信号。因为此时 directive 其实是使用父级的 scope， 当我们想在 directive 创建或操作属性时候，其实是在 父级 scope 进行，这样在复用性上会有潜在的问题。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">"MyModule"</span>)</div><div class="line">  .directive(<span class="string">"MyDirective"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">scope</span>: <span class="literal">false</span>,</div><div class="line">      <span class="attr">link</span>: <span class="function"><span class="keyword">function</span>(<span class="params">scope, el</span>) </span>&#123;</div><div class="line">        scope.myNewProp = <span class="string">"其实我是上面scope的"</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<p>当然，我们也可以把 scope 设置成 true。 这样 directive 的行为就和 ng-controller 一样了， 他会创建一个全新的 子级 scope 继承自父级。 这样你就可以访问父级 scope 的属性，也可以在自己的 scope 中创建新属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">"MyModule"</span>)</div><div class="line">  .directive(<span class="string">"MyDirective"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">scope</span>: <span class="literal">true</span>,</div><div class="line">      <span class="attr">link</span>: <span class="function"><span class="keyword">function</span>(<span class="params">scope, el</span>) </span>&#123;</div><div class="line">        scope.someParentObject.foo = <span class="string">"我还是可以改变父级元素的属性"</span>;</div><div class="line"></div><div class="line">        scope.someLocalObject = &#123;</div><div class="line">          <span class="attr">foo</span>: <span class="string">"我是本地scope的属性"</span></div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<p>我们可以从上面代码看到，当我们访问父级属性的时候，我们还是可以对父级属性修改，当创建新属性的时候，我们其实是在自己新的 scope 中创建。</p>
<p>相对于来说， isolate scope 就要附在一些。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">"MyModule"</span>)</div><div class="line">  .directive(<span class="string">"MyDirective"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">scope</span>: &#123;</div><div class="line">        <span class="attr">property</span>: <span class="string">"="</span>,</div><div class="line">        <span class="attr">expression</span>: <span class="string">"@"</span></div><div class="line">        action: <span class="string">"&amp;"</span></div><div class="line">      &#125;,</div><div class="line">      <span class="attr">link</span>: <span class="function"><span class="keyword">function</span>(<span class="params">scope, el</span>) </span>&#123;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<p>我们可以把上面代码中 scope 设置的三种符号认为是三种过滤器，下面让我们看看这三种过滤器各自的效果。</p>
<h3 id="scope"><a href="#scope" class="headerlink" title="scope: ="></a>scope: =</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">"MyApp"</span>, [])</div><div class="line">  .controller(<span class="string">"UserCtrl"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">    $scope.loggedInUser = &#123;</div><div class="line">      <span class="attr">name</span>: <span class="string">"Austin Powers"</span></div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">  .directive(<span class="string">"myUserDirective"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">restrict</span>: <span class="string">"E"</span>,</div><div class="line">      <span class="attr">template</span>: <span class="string">"&lt;input ng-model='user.name' /&gt;&lt;/div&gt;"</span>,</div><div class="line">      <span class="attr">scope</span>: &#123;</div><div class="line">        <span class="attr">user</span>: <span class="string">"="</span></div><div class="line">      &#125;,</div><div class="line">      <span class="attr">link</span>: <span class="function"><span class="keyword">function</span>(<span class="params">scope</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(scope.user) <span class="comment">// &#123; name: "Austin Powers" &#125;</span></div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<p>有了上面的代码， 我们就可以这样<code>&lt;my-user-directive user=&quot;loggedInUser&quot;&gt;&lt;/my-user-directive&gt;</code>使用 directive 了。 通过“＝”我们可以把父级的<code>loggedInUser</code>属性作为<code>user</code>传到子级，并且在 direcitve 和父级 scope 间建立双向绑定。使用“＝”的时候，传值永远是字符串值，就像这里的 loggedInUser 是父级 scope 的属性。如果我们改变<code>ng-model=&quot;user.name&quot;</code>的值，父级 UserCtrl 中的 loggedInUser 也会随之改变。</p>
<h3 id="scope-1"><a href="#scope-1" class="headerlink" title="scope: @"></a>scope: @</h3><p>相对于 “＝” 的双向绑定， “@” 实现的是单向绑定，对 direcitve scope 中属性的修改，不会影响到父级 scope 的属性。属性的传递是字符串，或者是在父级生成的字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">"MyApp"</span>, [])</div><div class="line">  .controller(<span class="string">"UserCtrl"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">    $scope.loggedInUser = &#123;</div><div class="line">      <span class="attr">firstName</span>: <span class="string">"zhe"</span>,</div><div class="line">      <span class="attr">lastName</span>: <span class="string">"xu"</span></div><div class="line">    &#125;;</div><div class="line">  &#125;)</div><div class="line">  .directive(<span class="string">"myUserDirective"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">restrict</span>: <span class="string">"E"</span>,</div><div class="line">      <span class="attr">template</span>: <span class="string">"&#123;&#123;fullName&#125;&#125;"</span>,</div><div class="line">      <span class="attr">scope</span>: &#123;</div><div class="line">        <span class="attr">fullName</span>: <span class="string">"@name"</span></div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">my-user-directive</span> <span class="attr">name</span>=<span class="string">"&#123;&#123;loggedInUser.firstName&#125;&#125; &#123;&#123;loggedInUser.lastName&#125;&#125;"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">my-user-directive</span>&gt;</span></div></pre></td></tr></table></figure>
<p>上例中我们在父级 scope 拼装了一个 name 属性赋给 directive 的 fullName, fullName 会随着父级 scope 中的 firstName 和 lastName 改变而改变。</p>
<h3 id="scope-amp"><a href="#scope-amp" class="headerlink" title="scope: &amp;"></a>scope: &amp;</h3><p>“&amp;” 过滤器最牛的地方是可以直接调用父级 scope 的表达式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">"MyApp"</span>, [])</div><div class="line">  .controller(<span class="string">"MathCtrl"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">    $scope.add = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> x + y;</div><div class="line">    &#125;;</div><div class="line">  &#125;)</div><div class="line">  .directive(<span class="string">"myAddThings"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">restrict</span>: <span class="string">"E"</span>,</div><div class="line">      <span class="attr">template</span>: <span class="string">"&#123;&#123;result&#125;&#125;"</span>,</div><div class="line">      <span class="attr">scope</span>: &#123;</div><div class="line">        <span class="attr">localFn</span>: <span class="string">"&amp;fn"</span></div><div class="line">      &#125;,</div><div class="line">      <span class="attr">link</span>: <span class="function"><span class="keyword">function</span>(<span class="params">scope</span>) </span>&#123;</div><div class="line">        scope.result = scope.localFn(&#123;</div><div class="line">          <span class="attr">x</span>: <span class="number">1</span>,</div><div class="line">          <span class="attr">y</span>: <span class="number">2</span></div><div class="line">        &#125;);</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">my-add-things</span> <span class="attr">fn</span>=<span class="string">"add(x, y)"</span>&gt;</span><span class="tag">&lt;/<span class="name">my-add-things</span>&gt;</span></div></pre></td></tr></table></figure>
<p>上面的例子中， 我们把父级的 add 方法作为表达式写入 html，directive 通过 “&amp;” 从父级 fn 继承表达式并赋给 localFn，然后我们就可以在dirctive 中使用 add 方法了， 而且可以直接传 dirctive scope 中的值进去。这个过滤器可以帮助我们更好的使用父级方法，如果几个不同的 directive 中需要用到公用方法，就可以用 “&amp;” 来避免重复定义。</p>
<h2 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h2><p>学 angluar 的路漫漫兮，scope只是其中的一块小蛋糕，希望在整个学习过程中，这篇文章可以对你有帮助。</p>
</div>

    <footer>
    </footer>
</article>


  <section id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="post-angular-scope" data-title="理解 Angular Scope" data-url="http://zhex.me/blog/2014/08/07/angular-scope/"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'zhex'};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
      </script>
    <!-- 多说公共JS代码 end -->
  </section>


</section>

    <footer id="footer">
    &copy;2016 ZheX, Powered by <a href="http://hexo.io">Hexo</a>
</footer>


    
</body>
</html>
