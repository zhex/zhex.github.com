<!DOCTYPE html>
<html lang="zh_CN">
<head>
	<meta charset="UTF-8">

<title>RPC 协议和他的 ruby 实现</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">





<link rel="stylesheet" href="/css/style.css">

</head>
<body>
    <header id="header">
    <ul class="nav">
        <li><a href="/archives">归档</a></li>
        <li><a href="/about">关于</a></li>
    </ul>

    <div class="logo"><a href="/">ZheX.me</a></div>
</header>


    <section id="main"><article>
    <header>
        <h1>RPC 协议和他的 ruby 实现</h1>
        <div class="info">
            <time datetime="2013-01-24T13:37:00.000Z" itemprop="datePublished">2013-01-24</time>

            
    <div class="article-category">
    <a class="article-category-link" href="/categories/Ruby/">Ruby</a>
    </div>


        </div>
    </header>

    <div class="article-entry"><h2 id="什么是-RPC"><a href="#什么是-RPC" class="headerlink" title="什么是 RPC"></a>什么是 RPC</h2><p>RPC 是 Remote Procedure Call的缩写，翻译成中文就是远程过程调用。</p>
<p>在百度百科中，我们可以简单的得到精确的定义：</p>
<blockquote><p>RPC协议假定某些传输协议的存在，如TCP或UDP，为通信程序之间携带信息数据。在OSI网络通信模型中，RPC跨越了传输层和应用层。RPC使得开发包括网络分布式多程序在内的应用程序更加容易。</p>
<p>RPC采用客户机/服务器模式。请求程序就是一个客户机，而服务提供程序就是一个服务器。首先，调用进程发送一个有进程参数的调用信息到服务进程，然后等待应答信息。在服务器端，进程保持睡眠状态直到调用信息的到达为止。当一个调用信息到达，服务器获得进程参数，计算结果，发送答复信息，然后等待下一个调用信息，最后，客户端调用过程接收答复信息，获得进程结果，然后调用执行继续进行。</p>
</blockquote>
<h2 id="Ruby-and-XML-RPC"><a href="#Ruby-and-XML-RPC" class="headerlink" title="Ruby and XML-RPC"></a>Ruby and XML-RPC</h2><p>XML-RPC 是一种基于 XML 传输的 RPC 实现方式。 而 ruby 里已经为我们内建了 XML-RPC 的类库，我们可以很方便的拿来编写程序。下面我们来看一个简单的例子。</p>
<figure class="highlight ruby"><figcaption><span>server.rb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'xmlrpc/server'</span></div><div class="line"></div><div class="line">server = XMLRPC::Server.new <span class="number">8080</span></div><div class="line"></div><div class="line">server.add_handler <span class="string">'user.yield'</span> <span class="keyword">do</span> <span class="params">|name|</span></div><div class="line">  <span class="string">"Hi, <span class="subst">#&#123;name&#125;</span>! Welcome to the RPC world."</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">server.serve</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><figcaption><span>client.rb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'xmlrpc/client'</span></div><div class="line"></div><div class="line">client = XMLRPC::Client.new <span class="string">'localhost'</span>, <span class="string">'/'</span>, <span class="number">8080</span></div><div class="line"></div><div class="line">puts client.call <span class="string">'user.yield'</span>, <span class="string">'zhex'</span></div></pre></td></tr></table></figure>
</div>

    <footer>
    </footer>
</article>


  <section id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="post-rpc-and-ruby" data-title="RPC 协议和他的 ruby 实现" data-url="http://zhex.me/blog/2013/01/24/rpc-and-ruby/"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'zhex'};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
      </script>
    <!-- 多说公共JS代码 end -->
  </section>


</section>

    <footer id="footer">
    &copy;2016 ZheX, Powered by <a href="http://hexo.io">Hexo</a>
</footer>


    
</body>
</html>
